<?php
/**
 * @package    {{ projectName }}
 * @subpackage {{ componentName }}
 * @version    {{ version }}
 *
 * @copyright  {{ copyright }}
 * @license    {{ license }}
 */

namespace {{ company_namespace }}\Component\{{ componentName }}\Administrator\Controller;

defined('_JEXEC') or die;

//TODO: only add use-clauses when needed; now only a few are used
use Exception;
use Joomla\CMS\Application\CMSApplication;
use Joomla\CMS\Form\FormFactoryInterface;
use Joomla\CMS\Language\Multilanguage;
use Joomla\CMS\MVC\Controller\FormController;
use Joomla\CMS\Router\Route;
use Joomla\CMS\MVC\Factory\MVCFactoryInterface;
use Joomla\CMS\MVC\Model\BaseDatabaseModel;
use Joomla\Input\Input;

class {{ pageName }}Controller extends FormController
{
	// todo: add $this->applyReturnUrl(); See Nic's PostController + ReturnURLAware mixin
	/**
	 * Method to run batch operations.
	 *
	 * @param   object  $model  The model.
	 *
	 * @return  boolean   True if successful, false otherwise and internal error is set.
	 *
	 * @since    {{ version }}
	 */
	public function batch($model = null)
	{
		$this->checkToken();

		$model = $this->getModel('Foo', 'Administrator', []);

		// Preset the redirect
		$this->setRedirect(Route::_('index.php?option=com_{{ componentName|lower }}&view={{ linkPageName|lower }}' . $this->getRedirectToListAppend(), false));

		return parent::batch($model);
	}

	public function edit($key = null, $urlVar = null)
	{
		// Joomla 4.1.1 and later will only allow cid as a POST variable. We need to use it with GET as well.
		$cid = (array) $this->input->get('cid', [], 'int');

		if (!empty($cid))
		{
			$this->input->post->set('cid', $cid);
		}

		return parent::edit($key, $urlVar);
	}

    // TODO: allowAdd, allowEdit etc.

}